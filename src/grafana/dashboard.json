{
  "id": null,
  "title": "System & API Metrics",
  "uid": "sys-api-metrics",
  "timezone": "browser",
  "schemaVersion": 16,
  "version": 4,
  "panels": [
    {
      "title": "CPU Usage (%)",
      "type": "timeseries",
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 2
        }
      },
      "targets": [
        {
          "expr": "sum(rate(container_cpu_usage_seconds_total[1m])) * 100",
          "legendFormat": "Total CPU"
        }
      ]
    },
    {
      "type": "timeseries",
      "title": "Memory Usage (GB)",
      "targets": [
        {
          "expr": "sum(container_memory_usage_bytes) / 1024^3",
          "legendFormat": "Total Memory"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "gigabytes",
          "decimals": 2
        }
      },
      "gridPos": { "x": 0, "y": 8, "w": 24, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "Requests/sec",
      "targets": [
        {
          "expr": "sum(rate(http_requests_total[1m]))",
          "legendFormat": "All requests"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "decimals": 2
        }
      },
      "gridPos": { "x": 0, "y": 16, "w": 24, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "Responses/sec (2xx, 4xx, 5xx)",
      "targets": [
        {
          "expr": "sum(rate(http_requests_total{status=~\"2..\"}[1m]))",
          "legendFormat": "2xx"
        },
        {
          "expr": "sum(rate(http_requests_total{status=~\"4..\"}[1m]))",
          "legendFormat": "4xx"
        },
        {
          "expr": "sum(rate(http_requests_total{status=~\"5..\"}[1m]))",
          "legendFormat": "5xx"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "decimals": 2
        }
      },
      "gridPos": { "x": 0, "y": 24, "w": 24, "h": 8 }
    }
  ]
}
